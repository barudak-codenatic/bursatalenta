generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int         @id @default(autoincrement())
  email        String      @unique
  password     String
  name         String
  address      String?
  born_date    DateTime?
  no_hp        String?
  status       String?
  porto_link      String?
  photo        String?     // Profile photo filename
  role         Role
  created_at   DateTime    @default(now())
  updated_at   DateTime    @updatedAt

  approvedJobs Job[]       // Only relation for approved jobs
  applicants   Applicant[]
}

model Job {
  id           Int         @id @default(autoincrement())
  company_name String
  title        String
  description  String
  location     String
  salary       Int
  type         String      @default("Full Time")
  image        String?
  is_approved  Boolean?
  is_opened  Boolean       @default(true)
  approved_by  Int?        // Only approved_by field as shown in ERD
  created_at   DateTime    @default(now())
  updated_at   DateTime    @updatedAt

  approver     User?       @relation(fields: [approved_by], references: [id])
  applicants   Applicant[]
}

model Applicant {
  id                     Int      @id @default(autoincrement())
  user_id                Int
  job_id                 Int
  resume                 String
  salary_expectation_min Int?
  salary_expectation_max Int?
  status                 String
  applied_at             DateTime @default(now())

  user                   User     @relation(fields: [user_id], references: [id])
  job                    Job      @relation(fields: [job_id], references: [id])
}

enum Role {
  ADMIN
  USER
}